/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    nf-caddsv config
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/

nextflow.enable.dsl = 2

params {
    // Input/Output
    input            = null
    outdir           = './results'
    publish_dir_mode = 'copy'

    // References - provide paths OR set download_references = true
    annotations_dir      = null
    models_dir           = null
    download_references  = false
    caddsv_cache_dir     = "${launchDir}/caddsv_references"
}

includeConfig 'conf/modules.config'

process {
    shell = ['/bin/bash', '-euo', 'pipefail']
    
    withLabel:process_low {
        cpus   = 2
        memory = 4.GB
        time   = 2.h
    }
    withLabel:process_medium {
        cpus   = 4
        memory = 16.GB
        time   = 8.h
    }
    withLabel:process_high {
        cpus   = 8
        memory = 64.GB
        time   = 16.h
    }
}

profiles {
    conda {
        conda.enabled = true
    }
    mamba {
        conda.enabled  = true
        conda.useMamba = true
    }
    docker {
        docker.enabled = true
    }
    singularity {
        singularity.enabled    = true
        singularity.autoMounts = true
    }
    test      { includeConfig 'conf/test.config' }
    test_download { includeConfig 'conf/test_download.config' }
    odcf {
        process.executor = 'lsf'
        process.queue    = 'long'
        singularity.enabled = true
    }
}

manifest {
    name        = 'nf-caddsv'
    description = 'CADD-SV scoring pipeline'
    mainScript  = 'main.nf'
    version     = '1.0.0'
}